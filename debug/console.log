rm -rf build/
find . -type f -name "*.o" -name "*.elf" -name "*.bin" -delete
make -C /root/os/src/kernel
make[1]: Entering directory '/root/os/src/kernel'

Kernel

mkdir -p /root/os/build/kernel/bin
mkdir -p /root/os/build/kernel/obj
mkdir -p /root/os/build/kernel/lib
make -C ./drivers;  make -C ./drivers/floppy;  make -C ./common;
make[2]: Entering directory '/root/os/src/kernel/drivers'

Drivers

i386-elf-gcc -m32 -Wall -Wextra -Werror -nostdlib -fno-builtin -ffreestanding -mno-red-zone -fdata-sections -ffunction-sections -std=c11  -I /root/os/src/kernel/drivers  -I /root/os/src/kernel/drivers/ide  -I /root/os/src/kernel/drivers/floppy  -I /root/os/src/kernel/common -c drivers.c -o /root/os/build/kernel/obj/drivers.o
make[2]: Leaving directory '/root/os/src/kernel/drivers'
make[2]: Entering directory '/root/os/src/kernel/drivers/floppy'

Floppy Driver

i386-elf-gcc -m32 -Wall -Wextra -Werror -nostdlib -fno-builtin -ffreestanding -mno-red-zone -fdata-sections -ffunction-sections -std=c11  -I /root/os/src/kernel/drivers  -I /root/os/src/kernel/drivers/ide  -I /root/os/src/kernel/drivers/floppy  -I /root/os/src/kernel/common -c fdc.c -o /root/os/build/kernel/obj/fdc.o
make[2]: Leaving directory '/root/os/src/kernel/drivers/floppy'
make[2]: Entering directory '/root/os/src/kernel/common'

Common

i386-elf-gcc -m32 -Wall -Wextra -Werror -nostdlib -fno-builtin -ffreestanding -mno-red-zone -fdata-sections -ffunction-sections -std=c11  -I /root/os/src/kernel/drivers  -I /root/os/src/kernel/drivers/ide  -I /root/os/src/kernel/drivers/floppy  -I /root/os/src/kernel/common -c io.c -o /root/os/build/kernel/obj/io.o
i386-elf-gcc -m32 -Wall -Wextra -Werror -nostdlib -fno-builtin -ffreestanding -mno-red-zone -fdata-sections -ffunction-sections -std=c11  -I /root/os/src/kernel/drivers  -I /root/os/src/kernel/drivers/ide  -I /root/os/src/kernel/drivers/floppy  -I /root/os/src/kernel/common -c memory.c -o /root/os/build/kernel/obj/memory.o
make[2]: Leaving directory '/root/os/src/kernel/common'
make[1]: Leaving directory '/root/os/src/kernel'
make -C /root/os/src/bootloader
make[1]: Entering directory '/root/os/src/bootloader'

Bootloader

mkdir -p /root/os/build/bootloader/bin
mkdir -p /root/os/build/bootloader/obj
make -C ./stage1boot;  make -C ./stage2boot;
make[2]: Entering directory '/root/os/src/bootloader/stage1boot'

Stage 1 Bootloader

nasm -f bin -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common stage1.S -o /root/os/build/bootloader/bin/stage1_FAT12.bin
make[2]: Leaving directory '/root/os/src/bootloader/stage1boot'
make[2]: Entering directory '/root/os/src/bootloader/stage2boot'

Stage 2 Bootloader

nasm -f elf32 -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common load_kernel.S -o /root/os/build/bootloader/obj/load_kernel.o
nasm -f elf32 -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common print_string32.S -o /root/os/build/bootloader/obj/print_string32.o
nasm -f elf32 -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common stage2_16.S -o /root/os/build/bootloader/obj/stage2_16.o
nasm -f elf32 -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common stage2_32.S -o /root/os/build/bootloader/obj/stage2_32.o
nasm -f elf32 -W+all -W+error -W+orphan-labels -W+macro-params -W+error -DFAT12 -DBITS32  -i /root/os/src/bootloader/stage1boot  -i /root/os/src/bootloader/boot16_utils  -i /root/os/src/bootloader/FAT  -i /root/os/src/bootloader/stage2boot  -i /root/os/src/bootloader/common stage2_64.S -o /root/os/build/bootloader/obj/stage2_64.o
ld --gc-sections -m elf_i386 -T stage2.ld  /root/os/build/bootloader/obj/load_kernel.o  /root/os/build/bootloader/obj/print_string32.o  /root/os/build/bootloader/obj/stage2_16.o  /root/os/build/bootloader/obj/stage2_32.o  /root/os/build/bootloader/obj/stage2_64.o /root/os/build/kernel/obj/fdc.o /root/os/build/kernel/obj/io.o /root/os/build/kernel/obj/memory.o -o /root/os/build/bootloader/obj/stage2.elf
i386-elf-objcopy -O binary /root/os/build/bootloader/obj/stage2.elf /root/os/build/bootloader/bin/stage2.bin
make[2]: Leaving directory '/root/os/src/bootloader/stage2boot'
make[1]: Leaving directory '/root/os/src/bootloader'
make  FAT_12
make[1]: Entering directory '/root/os'

Creating FAT 12 image -> /root/os/build/GeckOS_FAT12_BITS32.img with 1.44MB

dd if=/dev/zero                         of=/root/os/build/GeckOS_FAT12_BITS32.img     bs=512        count=2880
2880+0 records in
2880+0 records out
1474560 bytes (1.5 MB, 1.4 MiB) copied, 0.00731477 s, 202 MB/s
mkfs.fat /root/os/build/GeckOS_FAT12_BITS32.img -a -F 12 -S 512 -s 1 -r 224 -R 1
mkfs.fat 4.2 (2021-01-31)
dd if=/root/os/build/bootloader/bin/stage1_FAT12.bin      of=/root/os/build/GeckOS_FAT12_BITS32.img     bs=512  seek=0 conv=notrunc
1+0 records in
1+0 records out
512 bytes copied, 4.7424e-05 s, 10.8 MB/s
mcopy -i /root/os/build/GeckOS_FAT12_BITS32.img /root/os/build/bootloader/bin/stage2.bin ::
mcopy -i /root/os/build/GeckOS_FAT12_BITS32.img /root/os/misc/osfiles/* ::
make[1]: Leaving directory '/root/os'
mkdir -p /root/os/build/debug
objdump -D /root/os/build/bootloader/obj/stage2.elf > /root/os/build/debug/stage2
make -C /root/os/src/kernel
make[1]: Entering directory '/root/os/src/kernel'

Kernel

mkdir -p /root/os/build/kernel/bin
mkdir -p /root/os/build/kernel/obj
mkdir -p /root/os/build/kernel/lib
make -C ./drivers;  make -C ./drivers/floppy;  make -C ./common;
make[2]: Entering directory '/root/os/src/kernel/drivers'

Drivers

make[2]: Leaving directory '/root/os/src/kernel/drivers'
make[2]: Entering directory '/root/os/src/kernel/drivers/floppy'

Floppy Driver

make[2]: Leaving directory '/root/os/src/kernel/drivers/floppy'
make[2]: Entering directory '/root/os/src/kernel/common'

Common

make[2]: Leaving directory '/root/os/src/kernel/common'
make[1]: Leaving directory '/root/os/src/kernel'
make -C /root/os/src/bootloader
make[1]: Entering directory '/root/os/src/bootloader'

Bootloader

mkdir -p /root/os/build/bootloader/bin
mkdir -p /root/os/build/bootloader/obj
make -C ./stage1boot;  make -C ./stage2boot;
make[2]: Entering directory '/root/os/src/bootloader/stage1boot'

Stage 1 Bootloader

make[2]: Leaving directory '/root/os/src/bootloader/stage1boot'
make[2]: Entering directory '/root/os/src/bootloader/stage2boot'

Stage 2 Bootloader

ld --gc-sections -m elf_i386 -T stage2.ld  /root/os/build/bootloader/obj/load_kernel.o  /root/os/build/bootloader/obj/print_string32.o  /root/os/build/bootloader/obj/stage2_16.o  /root/os/build/bootloader/obj/stage2_32.o  /root/os/build/bootloader/obj/stage2_64.o /root/os/build/kernel/obj/fdc.o /root/os/build/kernel/obj/io.o /root/os/build/kernel/obj/memory.o -o /root/os/build/bootloader/obj/stage2.elf
i386-elf-objcopy -O binary /root/os/build/bootloader/obj/stage2.elf /root/os/build/bootloader/bin/stage2.bin
make[2]: Leaving directory '/root/os/src/bootloader/stage2boot'
make[1]: Leaving directory '/root/os/src/bootloader'
make  FAT_12
make[1]: Entering directory '/root/os'

Creating FAT 12 image -> /root/os/build/GeckOS_FAT12_BITS32.img with 1.44MB

dd if=/dev/zero                         of=/root/os/build/GeckOS_FAT12_BITS32.img     bs=512        count=2880
2880+0 records in
2880+0 records out
1474560 bytes (1.5 MB, 1.4 MiB) copied, 0.00757932 s, 195 MB/s
mkfs.fat /root/os/build/GeckOS_FAT12_BITS32.img -a -F 12 -S 512 -s 1 -r 224 -R 1
mkfs.fat 4.2 (2021-01-31)
dd if=/root/os/build/bootloader/bin/stage1_FAT12.bin      of=/root/os/build/GeckOS_FAT12_BITS32.img     bs=512  seek=0 conv=notrunc
1+0 records in
1+0 records out
512 bytes copied, 4.6132e-05 s, 11.1 MB/s
mcopy -i /root/os/build/GeckOS_FAT12_BITS32.img /root/os/build/bootloader/bin/stage2.bin ::
mcopy -i /root/os/build/GeckOS_FAT12_BITS32.img /root/os/misc/osfiles/* ::
make[1]: Leaving directory '/root/os'
make run_floppy
make[1]: Entering directory '/root/os'
qemu-system-i386 -drive file=/root/os/build/GeckOS_FAT12_BITS32.img,format=raw,index=0,if=floppy -m 128M -serial stdio -no-reboot -no-shutdown -d out_asm,in_asm,op,op_opt,op_ind,int,exec,cpu,cpu_reset,strace -D /root/os/build/debug/QEMU.log
make[1]: Leaving directory '/root/os